# π§‘β€π’¬ ChatWithRedis - μµλ… μ‹¤μ‹κ°„ μ±„ν… μ„λΉ„μ¤

> Java 17, Spring Boot, Redis, WebSocket κΈ°λ°μ κ°„λ‹¨ν• μ‹¤μ‹κ°„ μ±„ν… μ„λ²„μ…λ‹λ‹¤.

---

## π€ ν”„λ΅μ νΈ μ†κ°

μ΄ ν”„λ΅μ νΈλ” Redisμ **Pub/Sub** κΈ°λ¥μ„ ν™μ©ν•μ—¬,
λ‹¤μμ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μƒνƒμ—μ„ **μ‹¤μ‹κ°„μΌλ΅ μ±„ν… λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μ„ μ μλ”** μ‹μ¤ν…μ…λ‹λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” WebSocketμ„ ν†µν•΄ μ„λ²„μ™€ μ—°κ²°λλ©°, μ„λ²„λ” Redis μ±„λ„μ„ μ΄μ©ν•΄ λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤νΈν•©λ‹λ‹¤.

---

## π”§ κΈ°μ  μ¤νƒ

| κΈ°μ  | μ„¤λ… |
|------|------|
| Java 17 | λ°±μ—”λ“ μ–Έμ–΄ |
| Spring Boot 3 | μ• ν”λ¦¬μΌ€μ΄μ… ν”„λ μ„μ›ν¬ |
| Redis | λ©”μ‹μ§€ λΈλ΅μ»¤ (Pub/Sub) |
| WebSocket (STOMP) | μ‹¤μ‹κ°„ ν†µμ‹  |
| SockJS + STOMP.js | ν΄λΌμ΄μ–ΈνΈ WebSocket μ—°κ²° |
| Maven | λΉλ“ λ„κµ¬ |
| Lombok | μ½”λ“ κ°„κ²°ν™”λ¥Ό μ„ν• μ–΄λ…Έν…μ΄μ… μ§€μ› |

---

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
src
β””β”€β”€ main
    β”β”€β”€ java
    β”‚   β””β”€β”€ org.chatwithredis
    β”‚       β”β”€β”€ config
    β”‚       β”‚   β””β”€β”€ RedisConfig.java
    β”‚       β”‚   β””β”€β”€ WebSocketConfig.java
    β”‚       β”β”€β”€ controller
    β”‚       β”‚   β””β”€β”€ ChatController.java
    β”‚       β”β”€β”€ model
    β”‚       β”‚   β””β”€β”€ ChatMessage.java
    β”‚       β”β”€β”€ redis
    β”‚       β”‚   β””β”€β”€ RedisPublisher.java
    β”‚       β”‚   β””β”€β”€ RedisSubscriber.java
    β”‚       β”β”€β”€ websocket
    β”‚       β”‚   β””β”€β”€ WebSocketConfig.java
    β”‚       β”β”€β”€ ChatWithRedisApplication.java
    β””β”€β”€ resources
        β”β”€β”€ application.properties
        β””β”€β”€ static
            β””β”€β”€ chat.html
```

---

## β¨ μ£Όμ” κΈ°λ¥

- β… **WebSocket(STOMP) κΈ°λ° μ‹¤μ‹κ°„ μ±„ν…**
    - ν΄λΌμ΄μ–ΈνΈλ” `SockJS + STOMP.js`λ¥Ό μ‚¬μ©ν•μ—¬ WebSocket μ—°κ²°
    - λ©”μ‹μ§€λ¥Ό μ„λ²„μ— μ „μ†΅ν•λ©΄, μ„λ²„λ” μ΄λ¥Ό Redisλ¥Ό ν†µν•΄ λ¨λ“  μ‚¬μ©μμ—κ² λΈλ΅λ“μΊμ¤νΈ

- β… **Redis Pub/Sub κΈ°λ° λ©”μ‹μ§€ μ „μ†΅**
    - λ©”μ‹μ§€λ” `chatroom`μ΄λΌλ” Redis μ±„λ„μ„ ν†µν•΄ λ°ν–‰(publish)
    - μ„λ²„λ” Redisλ¥Ό κµ¬λ…(subscribe)ν•μ—¬ λ©”μ‹μ§€λ¥Ό μμ‹ ν•κ³  WebSocketμ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬

- β… **μ±„ν…λ°©(roomId) λ¶„λ¦¬ μ§€μ›**
    - κ° λ©”μ‹μ§€λ” νΉμ • μ±„ν…λ°© ID(`roomId`)λ¥Ό ν¬ν•¨ν•μ—¬ μ „μ†΅λ¨
    - ν΄λΌμ΄μ–ΈνΈλ” `roomId`λ³„λ΅ WebSocket μ±„λ„μ„ κµ¬λ…ν•¨

- β… **μ…μ¥/ν‡΄μ¥ λ©”μ‹μ§€ μ²λ¦¬**
    - μ‚¬μ©μκ°€ μ±„ν…λ°©μ— λ“¤μ–΄μ¤κ±°λ‚ λ‚κ° λ• μ…μ¥/ν‡΄μ¥ λ©”μ‹μ§€λ¥Ό μλ™μΌλ΅ μ „μ†΅

- β… **μµλ… μ‚¬μ©μ μ΄λ¦„ μλ™ μƒμ„±**
    - ν΄λΌμ΄μ–ΈνΈ μ ‘μ† μ‹ λ¬΄μ‘μ„ μµλ… μ΄λ¦„(`μµλ…123` λ“±) μλ™ λ¶€μ—¬

- β… **ν΄λΌμ΄μ–ΈνΈ HTML μ κ³µ**
    - κΈ°λ³Έ HTML νμΌ(`chat.html`)μ„ ν†µν•΄ λΈλΌμ°μ €μ—μ„ ν…μ¤νΈ κ°€λ¥
    - λ©”μ‹μ§€ μ…λ ¥, μ¶λ ¥ UI μ κ³µ

---

## β™οΈ μ‹¤ν–‰ λ°©λ²•

### π”Έ 1. Redis μ‹¤ν–‰ (Docker)

```bash
docker run --name redis -p 6379:6379 -d redis
```

---

### π”Έ 2. μ„λ²„ μ‹¤ν–‰

```bash
# ν”„λ΅μ νΈ λ£¨νΈμ—μ„
./mvnw spring-boot:run
```

---

### π”Έ 3. ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ

λΈλΌμ°μ €μ—μ„:

```
http://localhost:8080/chat.html
```

λΈλΌμ°μ € νƒ­ μ—¬λ¬ κ°λ¥Ό μ—΄κ³  λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μ•„λ³΄μ„Έμ”!

---

## π› οΈ κ°λ° μ‹ μ μ μ‚¬ν•­

- `Lombok` ν”λ¬κ·ΈμΈ μ„¤μΉ λ° Annotation Processing μ„¤μ • ν•„μ”
- `application.yml`μ—μ„ Redis μ—°κ²° μ •λ³΄(`localhost`, ν¬νΈ λ“±) ν™•μΈ
- λΈλΌμ°μ €κ°€ WebSocketμ„ μ§€μ›ν•μ§€ μ•μΌλ©΄ SockJSκ°€ fallback

---

## π™‹β€β™‚οΈ κ°μ„  μ•„μ΄λ””μ–΄ (To-do)

- μ±„ν…λ°© λ©λ΅ API λ§λ“¤κΈ°
- λ‹‰λ„¤μ„ μ„¤μ • κΈ°λ¥ μ¶”κ°€
- λ©”μ‹μ§€ Redis μ €μ¥ λλ” DB μ—°λ™
- μ±„ν…λ°© μ…μ¥/ν‡΄μ¥ μ‚¬μ©μ κ΄€λ¦¬
- JWT λ“±μΌλ΅ μΈμ¦ κΈ°λ¥ μ¶”κ°€

---

## π“ λΌμ΄μ„ μ¤

MIT License. μμ λ΅­κ² μ‚¬μ©ν•κ³  μμ •ν•μ„Έμ”.